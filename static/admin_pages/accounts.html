<div class="page-header-row">
    <h2>Cuentas por Mesa</h2>
    <button id="btn-create-mesa" class="form-btn create-button" title="Crear nueva mesa">
        ➕ Nueva Mesa
    </button>
</div>

<div id="accounts-grid" class="grid grid-3">
    <!-- Las tarjetas de mesa se generarán aquí con el nuevo diseño integrado -->
</div>

<!-- Payment Modal (manejado por admin_dashboard.html) -->

<!-- Account History Modal -->
<div id="account-history-modal" class="modal-overlay hidden">
    <div class="card modal-card-large modal-card-scrollable">
        <h3>Historial de Cuentas</h3>
        <div id="history-list" class="modal-content-scroll">
            <!-- Historical accounts list -->
        </div>
        <div class="text-right">
            <button type="button" id="history-modal-close" class="form-btn modal-button-secondary">Cerrar</button>
        </div>
    </div>
</div>

<!-- Account Details Modal (Reusable for history details) -->
<div id="account-details-modal" class="modal-overlay modal-overlay-higher hidden">
    <div class="card modal-card-xlarge modal-card-scrollable-high">
        <div class="modal-header-row">
            <h3 id="details-title">Detalles de Cuenta</h3>
            <button type="button" id="details-modal-close-x" class="btn-close-x">&times;</button>
        </div>
        <div id="details-content" class="modal-content-scroll">
            <!-- Content -->
        </div>
        <!-- Footer button removed as requested -->
    </div>
</div>

<!-- Create Mesa Modal -->
<div id="create-mesa-modal" class="modal-overlay modal-overlay-highest hidden">
    <div class="card modal-card-medium">
        <h3>Crear Nueva Mesa</h3>
        <form id="create-mesa-form">
            <div class="form-group">
                <label for="mesa-numero">Número de Mesa</label>
                <input type="number" id="mesa-numero" name="numero" placeholder="Ej: 1, 2, 3..." min="1" required>
            </div>
            <div class="form-group">
                <label for="mesa-nombre">Nombre Personalizado (Opcional)</label>
                <input type="text" id="mesa-nombre" name="nombre" placeholder="Ej: Toscana, VIP, Rincón, etc.">
            </div>
            <div class="modal-buttons-row">
                <button type="submit" class="form-btn modal-button-flex modal-button-success">Crear Mesa</button>
                <button type="button" id="create-mesa-modal-close"
                    class="form-btn modal-button-flex modal-button-secondary">Cancelar</button>
            </div>
        </form>
    </div>
</div>

<!-- QR Management Modal -->
<div id="qr-management-modal" class="modal-overlay modal-overlay-highest hidden">
    <div class="card modal-card-medium">
        <div class="qr-modal-header">
            <h3 id="qr-modal-title">Gestionar QR</h3>
            <button type="button" id="qr-modal-close-x" class="form-btn red qr-modal-close-x">&times;</button>
        </div>

        <div class="form-group qr-modal-form-group">
            <div class="qr-management-row">
                <div class="qr-management-col">
                    <label for="qr-modal-user-select" class="qr-modal-label">Seleccionar Usuario:</label>
                    <select id="qr-modal-user-select" class="form-control qr-modal-select">
                        <option value="1">Usuario 1 (Principal)</option>
                    </select>
                </div>
                <button type="button" id="qr-modal-add-user" class="form-btn qr-action-btn qr-btn-add"
                    title="Añadir Usuario">
                    ➕
                </button>
                <button type="button" id="qr-modal-remove-user" class="form-btn qr-action-btn qr-btn-remove"
                    title="Eliminar Usuario" disabled>
                    ❌
                </button>
            </div>
        </div>



        <div id="qr-modal-content" class="qr-modal-content-wrapper">
            <div id="qr-modal-image-container" class="qr-image-container">
                <!-- QR Image injected here -->
                <img id="qr-modal-img" src="" alt="QR Code" class="qr-image">
            </div>
            <p id="qr-modal-url" class="qr-url-text">
            </p>
        </div>

        <div class="modal-buttons-row qr-modal-buttons-row">
            <a id="qr-modal-download-btn" href="#" download="qr-code.png"
                class="form-btn modal-button-primary qr-download-btn">
                ⬇️ Descargar
            </a>
            <button type="button" id="qr-modal-close" class="form-btn modal-button-secondary">
                Cerrar
            </button>
        </div>
    </div>
</div>