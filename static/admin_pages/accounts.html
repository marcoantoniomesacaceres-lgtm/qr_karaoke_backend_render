<div class="page-header-row">
    <h2>Cuentas por Mesa</h2>
    <button id="btn-create-mesa" class="form-btn create-button" title="Crear nueva mesa">
        ‚ûï Nueva Mesa
    </button>
</div>

<!-- SECCI√ìN DE GESTI√ìN DE MESAS (INTEGRADA) -->
<div class="card tables-management-section">
    <h3 class="tables-management-title">üè∑Ô∏è Gesti√≥n de Mesas y QR</h3>
    <div class="tables-grid">

        <!-- PANEL 1: GENERADOR DE QR (COMPACTO) -->
        <div class="tables-panel">
            <h4 class="tables-panel-header">
                <span class="tables-panel-icon">üñ®Ô∏è</span> Generador de QR
            </h4>

            <form id="qr-generator-form">
                <div class="compact-form-group">
                    <label for="qr-table-number" class="compact-label">N√∫mero de Mesa:</label>
                    <input type="number" id="qr-table-number" min="1" placeholder="Ej: 5" required
                        class="compact-input">
                </div>

                <div class="compact-form-group">
                    <label for="qr-user-select" class="compact-label">Usuario:</label>
                    <select id="qr-user-select" class="compact-input">
                        <option value="1">Usuario 1</option>
                        <option value="2">Usuario 2</option>
                        <option value="3">Usuario 3</option>
                        <option value="4">Usuario 4</option>
                        <option value="5">Usuario 5</option>
                        <option value="6">Usuario 6</option>
                        <option value="7">Usuario 7</option>
                        <option value="8">Usuario 8</option>
                        <option value="9">Usuario 9</option>
                        <option value="10">Usuario 10</option>
                    </select>
                </div>

                <button type="submit" class="btn-primary compact-button">
                    Generar QR
                </button>
            </form>

            <div id="qr-result" class="qr-result-area">
                <p class="qr-result-placeholder">El c√≥digo QR aparecer√° aqu√≠</p>
            </div>
        </div>

        <!-- PANEL 2: GESTI√ìN (COMPACTO) -->
        <div class="tables-panel">
            <h4 class="tables-panel-header">
                <span class="tables-panel-icon">‚öôÔ∏è</span> Gesti√≥n de Mesa
            </h4>

            <form id="table-management-form">
                <div class="compact-form-group">
                    <label for="manage-table-number" class="compact-label">N√∫mero de Mesa:</label>
                    <input type="number" id="manage-table-number" min="1" placeholder="Ej: 5" required
                        class="compact-input">
                </div>

                <div class="table-actions-container">
                    <button type="button" id="btn-activate" class="btn-activate table-action-button">
                        ‚úÖ Activar Mesa
                    </button>

                    <button type="button" id="btn-deactivate" class="btn-deactivate table-action-button">
                        ‚è∏Ô∏è Desactivar Mesa
                    </button>

                    <button type="button" id="btn-delete" class="btn-delete table-action-button">
                        üóëÔ∏è Eliminar Mesa
                    </button>

                    <button type="button" id="btn-create" class="btn-primary table-action-button">
                        ‚ûï Crear Mesa (Si no existe)
                    </button>
                </div>

                <div id="management-status" class="table-status-area"></div>
            </form>
        </div>
    </div>
</div>
<div class="card">
    <h3>Cuentas Registradas</h3>
    <p class="text-secondary">Las cuentas se crean autom√°ticamente al crear una nueva mesa.</p>
    <div id="accounts-grid" class="grid grid-3">
        <!-- Las tarjetas de estado de cuenta se generar√°n aqu√≠ -->
    </div>
</div>

<!-- Payment Modal (manejado por admin_dashboard.html) -->

<!-- Account History Modal -->
<div id="account-history-modal" class="modal-overlay">
    <div class="card modal-card-large modal-card-scrollable">
        <h3>Historial de Cuentas</h3>
        <div id="history-list" class="modal-content-scroll">
            <!-- Historical accounts list -->
        </div>
        <div class="text-right">
            <button type="button" id="history-modal-close" class="form-btn modal-button-secondary">Cerrar</button>
        </div>
    </div>
</div>

<!-- Account Details Modal (Reusable for history details) -->
<div id="account-details-modal" class="modal-overlay modal-overlay-higher">
    <div class="card modal-card-xlarge modal-card-scrollable-high">
        <h3 id="details-title">Detalles de Cuenta</h3>
        <div id="details-content" class="modal-content-scroll">
            <!-- Content -->
        </div>
        <div class="text-right">
            <button type="button" id="details-modal-close" class="form-btn modal-button-secondary">Cerrar</button>
        </div>
    </div>
</div>

<!-- Create Mesa Modal -->
<div id="create-mesa-modal" class="modal-overlay modal-overlay-highest">
    <div class="card modal-card-medium">
        <h3>Crear Nueva Mesa</h3>
        <form id="create-mesa-form">
            <div class="form-group">
                <label for="mesa-numero">N√∫mero de Mesa</label>
                <input type="number" id="mesa-numero" name="numero" placeholder="Ej: 1, 2, 3..." min="1" required>
            </div>
            <div class="form-group">
                <label for="mesa-nombre">Nombre Personalizado (Opcional)</label>
                <input type="text" id="mesa-nombre" name="nombre" placeholder="Ej: Toscana, VIP, Rinc√≥n, etc.">
            </div>
            <div class="modal-buttons-row">
                <button type="submit" class="form-btn modal-button-flex modal-button-success">Crear Mesa</button>
                <button type="button" id="create-mesa-modal-close"
                    class="form-btn modal-button-flex modal-button-secondary">Cancelar</button>
            </div>
        </form>
    </div>
</div>